
{% extends 'base.html' %}
{% load static %}

{% block title %}–ù–æ–≤–æ—Å—Ç–∏ —Å–µ–≥–æ–¥–Ω—è{% endblock %}

{% block content %}
<h1 class="mb-4">–ê–∫—Ç—É–∞–ª—å–Ω–æ–µ</h1>
<p>–ö—É—Ä—Å—ã –≤–∞–ª—é—Ç: 1USD = {{ rate_usd|default:"–î–∞–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã" }};
    1EUR = {{ rate_eur|default:"–î–∞–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã" }};
    100RUB = {{ rate_rub|default:"–î–∞–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã" }}
</p>
{% if weather_minsk %}
<p>
    –ü–æ–≥–æ–¥–∞ –≤ –ú–∏–Ω—Å–∫–µ: {{ weather_minsk.temperature }}¬∞C, –≤–µ—Ç–µ—Ä {{ weather_minsk.windspeed }} –º/—Å,
    {% if weather_minsk.weathercode == 0 %}
    –Ø—Å–Ω–æ
    {% elif weather_minsk.weathercode == 1 %}
    –ß–∞—Å—Ç–∏—á–Ω–æ —è—Å–Ω–æ
    {% elif weather_minsk.weathercode == 2 %}
    –û–±–ª–∞—á–Ω–æ
    {% elif weather_minsk.weathercode == 3 %}
    –ü–∞—Å–º—É—Ä–Ω–æ
    {% elif 44 < weather_minsk.weathercode < 49 %}
    –¢—É–º–∞–Ω
    {% elif 55 < weather_minsk.weathercode < 58 %}
    –ú–æ—Ä–∞—Å—å
    {% elif 60 < weather_minsk.weathercode < 66 %}
    –î–æ–∂–¥—å
    {% elif 70 < weather_minsk.weathercode < 76 %}
    –°–Ω–µ–≥
    {% elif 84 < weather_minsk.weathercode < 87 %}
    –ú–µ—Ç–µ–ª—å
    {% elif 94 < weather_minsk.weathercode < 100 %}
    –ì—Ä–æ–∑–∞
    {% else %}
    –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ
    {% endif %}
</p>
      {% else %}
      <p class="mb-0 fst-italic text-light">–î–∞–Ω–Ω—ã–µ –æ –ø–æ–≥–æ–¥–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã</p>
      {% endif %}

<!-- –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º -->
<div class="mb-3 d-flex justify-content-between align-items-center flex-wrap">
    <!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å: –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
    <div class="d-flex flex-wrap">
        <!-- –ö–Ω–æ–ø–∫–∞ "–í—Å–µ" -->
        <a href="{% url 'news' %}" class="btn btn-sm {% if not selected_category %}btn-success{% else %}btn-outline-success{% endif %} me-2 mb-2">
            –í—Å–µ
        </a>
        <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
        {% for category in categories %}
            <a href="?category={{ category.id }}" class="btn btn-sm {% if category.id|stringformat:"s" == selected_category %}btn-success{% else %}btn-outline-success{% endif %} me-2 mb-2">
                {{ category.name }}
            </a>
        {% endfor %}
    </div>
</div>

    <!-- –ü–æ–∏—Å–∫ -->
    <form method="get" class="text-center mb-4">
        <div class="input-group w-50 mx-auto">
            <input type="text" name="q" value="{{ request.GET.q }}" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É ..."
                   class="form-control border-success">
            <button class="btn btn-success" type="submit">üîç –ù–∞–π—Ç–∏</button>
        </div>
    </form>

<!-- –ù–æ–≤–æ—Å—Ç–∏ -->
<div class="row">
    <h1 style="text-align: center;">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏</h1>

    {% for news_item in news %}
    <div class="news-item">
        <h2 class="news-title">
            <a href="{% url 'news_detail' news_item.id %}">{{ news_item.title }}</a>
        </h2>

        {% if news_item.image_url %}
        <img src="{{ news_item.image_url }}" alt="{{ news_item.title }}" class="news-image">
        {% else %}
        <img src="{% static 'no-image.png' %}" class="img-fluid rounded shadow-sm" alt="–ù–µ—Ç —Ñ–æ—Ç–æ">
        {% endif %}
        <p class="card-text">{{ news_item.content|truncatewords:25 }}</p>
        <p class="category">
            –ö–∞—Ç–µ–≥–æ—Ä–∏—è:
            {% if news_item.category %}
            {{ news_item.category.name }}
            {% else %}
            –ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
            {% endif %}
        </p>
        <p class="category">
            –î–∞—Ç–∞: {{ news_item.date_created|date:"d F Y, H:i" }}
        </p>

    </div>
{% empty %}
    <p style="text-align: center;">–ù–µ—Ç –Ω–æ–≤–æ—Å—Ç–µ–π –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.</p>
{% endfor %}
</div>
{% endblock %}
